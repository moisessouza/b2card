<meta charset="utf-8">
{% extends "base_page.html" %}

{% block script %}

	<script src="/static/js/apps/demandas/demandas.js"></script>
	<script src="/static/js/apps/demandas/demandas-services.js"></script>
	<script src="/static/js/apps/faturamento/parcela.js"></script>
	<script src="/static/js/apps/faturamento/parcela-services.js"></script>
	<script src="/static/js/apps/cadastros/centrocusto/centrocusto-services.js"></script>
	<script src="/static/js/apps/cadastros/centroresultado/centroresultado-services.js"></script>
	<script src="/static/js/apps/cadastros/unidadeadministrativa/unidadeadministrativa-services.js"></script>
	<script src="/static/js/apps/cadastros/valorhora/valorhora-services.js"></script>
	<script src="/static/js/apps/cadastros/fase/fase-services.js"></script>
	<script src="/static/js/apps/cadastros/pessoa/pessoa-services.js"></script>
	
{% endblock %}

{%block content%}

{% if demanda %}
<script type="text/javascript">
	var demanda_id = {{demanda.id}}
	var cliente_id = {{demanda.cliente.id}}
</script>
{% else %}
<script type="text/javascript">
	var demanda_id = null;
	var cliente_id = null;
</script>
{% endif %}

{%verbatim%}

<style>
	span.red { 
   		color:red;
  	}
  	button.margin {
		margin-bottom: 1em;
		margin-top: 1em;
	}
	
	span.margin {
		margin: -3px;
	}
	
	table thead tr th{
		text-align: center;
	}
	
	.heading-text-align {
		text-align: center;
	}
	
	.margin-top {
		margin-top: 2em;
	}
	
	div.scroll {
		overflow-y: scroll;  
		height:400px;
	}
	.app-modal-window .modal-dialog {
	  width: 100%;
	  height: 100%;
	  margin: 0;
	  padding: 0;
	}
	.modal-content {
	  height: auto;
	  min-height: 100%;
	  border-radius: 0;
	}
		
</style>
<div ng-app="demandas" ng-controller="DemandaController as $ctrl" class="ng-hide" ng-show="$ctrl.show">
	<div class="panel panel-primary form-group-sm margin-top">
		<div class="panel-body">
			<div class="form-horizontal">
				<div class="col-sm-1">
					<div class="form-group">
						<label class="control-label col-sm-1" for="id">ID:</label>
						<div class="col-sm-1">
							<p class="form-control-static">{{$ctrl.demanda.id}}</p>
						</div>
					</div>
				</div>
				<div class="col-sm-4">
					<div class="form-group">
						<label class="control-label col-sm-6" for="id">Nome da demanda:</label>
						<div class="col-sm-6">
							<p class="form-control-static">{{$ctrl.demanda.nome_demanda}}</p>
						</div>
					</div>
				</div>
				<div class="col-sm-4">
					<div class="form-group">
						<label class="control-label col-sm-6" for="id">Código da demanda:</label>
						<div class="col-sm-2">
							<p class="form-control-static">{{$ctrl.demanda.codigo_demanda}}</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<ul class="nav nav-tabs">
	  <li class="active" ng-show="$ctrl.verificardisponibilidadeaba('#dadosdemanda')"><a data-toggle="tab" href="#dadosdemanda">Dados da demanda</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#orcamento')"><a data-toggle="tab" href="#orcamento">Orçamento</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#atividades')"><a data-toggle="tab" href="#atividades">Atividades</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#proposta')"><a data-toggle="tab" href="#proposta">Proposta</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#tarefas')"><a data-toggle="tab" href="#tarefas">Tarefas</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#observacoes')"><a data-toggle="tab" href="#observacoes">Observações</a></li>
	  <li ng-show="$ctrl.verificardisponibilidadeaba('#ocorrencias')"><a data-toggle="tab" href="#ocorrencias">Ocorrências</a></li>
	</ul>
	<div class="tab-content">
		<div id="dadosdemanda" ng-if="$ctrl.verificardisponibilidadeaba('#dadosdemanda')" class="tab-pane in active">
			<form name="demanda">
					
				<div class="panel panel-primary form-group-sm margin-top">
					<div class="panel-heading"><strong>Dados da demanda</strong></div>
					<div class="panel-body">
						<div class="row">
							<div class="col-md-1">
								<div class="form-group">
									<label for="cliente">ID</label> 
								    <input type="text" id="id" name="id" ng-model="$ctrl.demanda.id" class="form-control" disabled/>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label for="cliente">Cliente</label> 
								    <select id="cliente" name="cliente" class="form-control" ng-change="$ctrl.changecliente()" ng-model="$ctrl.demanda.cliente.id" ng-options="c.id as c.pessoa.nome_razao_social for c in $ctrl.listaclientes" required>
								    	<option value="">Selecione um cliente...</option>
								    </select>
									<span class="red" ng-show="demanda.cliente.$invalid">Cliente é obrigatório.</span>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label for="nome_demanda">Nome da demanda</label> 
								    <input type="text" id="nome_demanda" name="nome_demanda" ng-model="$ctrl.demanda.nome_demanda" class="form-control" required maxlength="30"/>
								    <span class="red" ng-show="demanda.nome_demanda.$invalid">Nome da demanda é obrigatório.</span>
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group form-group-sm">
									<label for="status_demanda"> Status da demanda</label> 
								    <select id="status_demanda" name="status_demanda" ng-model="$ctrl.demanda.status_demanda" class="form-control" required>
							    		<option value="">Selecione um tipo...</option>
							    		<option value="O">Em orçamentação</option>
							    		<option value="A">Aguardando aprovação</option>
							    		<option value="N">Não aprovada</option>
							    		<option value="C">Cancelada</option>
							    		<option value="H">Em homologação</option>
							    		<option value="I">Implantada</option>
							    		<option value="D">Em desenvolvimento</option>
							    	</select>
							    	<span class="red" ng-show="demanda.status_demanda.$invalid">Status da demanda é obrigatório.</span>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label for="codigo_demanda">Código da demanda</label> 
								    <input type="text" id="codigo_demanda" name="codigo_demanda" ng-model="$ctrl.demanda.codigo_demanda" class="form-control" maxlength="12" required/>
								    <span class="red" ng-show="demanda.codigo_demanda.$invalid">Código da demanda é obrigatório.</span>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group">
									<label for="unidade_administrativa">Unidade administrativa</label> 
								    <select id="unidade_administrativa" name="unidade_administrativa" class="form-control" ng-model="$ctrl.demanda.unidade_administrativa.id" ng-options="u.id as (u.codigo + ' - ' + u.nome) for u in $ctrl.listaunidadeadministrativas" required>
								    	<option value="">Selecione uma unidade...</option>
								    </select>
								    <span class="red" ng-show="demanda.unidade_administrativa.$invalid">Unidade administrativa é obrigatório.</span>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="form-group">
									<label for="descricao">Descrição</label> 
								    <textarea id="descricao" name="descricao" ng-model="$ctrl.demanda.descricao" class="form-control"></textarea>
								</div>
							</div>
						</div>
						
					</div>
				</div>
			</form>
		</div>
		<div id="orcamento" ng-if="$ctrl.verificardisponibilidadeaba('#orcamento')" class="tab-pane">
			<div ng-include="$ctrl.retornarurl('static/fragments/demanda_orcamento.html')"></div>
		</div>
		<div id="atividades" ng-if="$ctrl.verificardisponibilidadeaba('#atividades')" class="tab-pane">
			<div ng-include="$ctrl.retornarurl('static/fragments/demanda_atividade.html')"></div>
		</div>
		<div id="proposta" ng-if="$ctrl.verificardisponibilidadeaba('#proposta')" class="tab-pane">
		   	
		   	<button type="button" class="btn btn-primary margin" ng-click="$ctrl.adicionarproposta()">
		  		<span class="glyphicon glyphicon-plus"></span> Adicionar proposta
			</button>
			
			<form name="proposta" >
				<table class="table table-sm table-bordered table-striped table-highlight">
					<thead>
					  <tr class="active">
					    <th colspan="4">Proposta</th>
					    <th colspan="3">Aprovação</th>
					    <th></th>
					  </tr>
					  <tr class="active">
					    <th>Data recimento solicitação</th>
					    <th>Data limite entrega</th>
					    <th>Data real entrega</th>
					    <th>Númerdo da proposta B2Card</th>
					    <th>Data de aprovação</th>
					    <th>Empresa ganhadora</th>
					    <th>Tot horas ganhadora</th>
					    <th></th>
					  </tr>
					</thead>
					<tbody>
						<tr ng-repeat="proposta in $ctrl.demanda.propostas" ng-show="!proposta.remover">
							<td>
								<input type="text" ng-model="proposta.data_recimento_solicitacao" class="form-control" ui-mask="99/99/9999" model-view-value="true"/>
							</td>
							<td>
								<input type="text" ng-model="proposta.data_limite_entrega" class="form-control" ui-mask="99/99/9999" model-view-value="true"/>
							</td>
							<td>
								<input type="text" ng-model="proposta.data_real_entrega" class="form-control" ui-mask="99/99/9999" model-view-value="true"/>
							</td>
							<td>
								<input type="text" ng-model="proposta.numerdo_proposta" class="form-control" maxlength="30" placeholder="Númerdo da proposta B2Card"/>
							</td>
							<td>
								<input type="text" ng-model="proposta.data_aprovacao" class="form-control" ui-mask="99/99/9999" model-view-value="true"/>
							</td>
							<td>
								<input type="text" ng-model="proposta.empresa_ganhadora" class="form-control" maxlength="30" placeholder="Empresa ganhadora"/>
							</td>
							<td>
								<input type="number" ng-model="proposta.total_horas_ganhadora" class="form-control" placeholder="Tot horas ganhadora"/>
							</td>
							<td>
								<button type="button" class="btn btn-default" ng-click="$ctrl.remover(proposta)">
									<span class="glyphicon glyphicon-trash"></span>
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</form>
		</div>
		
		<div id="tarefas" ng-if="$ctrl.verificardisponibilidadeaba('#tarefas')" class="tab-pane">
		
			<button type="button" class="btn btn-primary margin" ng-click="$ctrl.adicionartarefa()">
		  		<span class="glyphicon glyphicon-plus"></span> Adicionar tarefa
			</button>	
			<form name="tarefaform" ng-repeat="tarefa in $ctrl.demanda.tarefas" ng-show="!tarefa.remover">
				<div class="panel panel-primary form-group-sm">
					<div class="panel-heading">
						<div class="btn-group" ng-show="!tarefa.show">
							<button type="button" class="btn btn-primary dropdown-toggle" ng-click="$ctrl.layout(tarefa)">
			  					<span class="glyphicon glyphicon-plus margin"></span>
							</button>
						</div>
						<div class="btn-group"  ng-show="tarefa.show">
							<button type="button" class="btn btn-primary dropdown-toggle" ng-click="$ctrl.layout(tarefa)">
			  					<span class="glyphicon glyphicon-minus margin"></span>
							</button>
						</div>
						<strong>{{tarefa.descricao ? tarefa.descricao : '(Sem descrição)'}}</strong>
						<div class="btn-group pull-right">					
							<button type="button" class="btn btn-primary" ng-click="$ctrl.remover(tarefa)">
			  					<span class="glyphicon glyphicon-trash margin"></span>
							</button>
						</div>
					</div>
					<div class="panel-body" ng-show="tarefa.show">
						<div class="row">
							<div class="col-sm-5">
								<div class="form-group">
									<label for="descricao">Descrição</label> 
								    <textarea id="descricao" name="descricao" ng-model="tarefa.descricao" class="form-control" required></textarea>
								    <span class="red" ng-show="tarefaform.descricao.$invalid">Descrição é obrigatório.</span>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<div class="form-group">
									<label for="analista_tecnico_responsavel">Analista técnico responsável</label> 
								    <select id=analista_tecnico_responsavel name="analista_tecnico_responsavel" class="form-control" ng-model="tarefa.analista_tecnico_responsavel.id" ng-options="f.id as f.pessoa.nome_razao_social for f in $ctrl.listafuncionarios" required>
									   	<option value="">Selecione um analista...</option>
									</select>
								    <span class="red" ng-show="tarefaform.analista_tecnico_responsavel.$invalid">Analista técnico responsável é obrigatório.</span>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-group">
									<label for="descricao">Responsável</label> 
								    <select id=responsavel name="responsavel" class="form-control" ng-model="tarefa.responsavel.id" ng-options="f.id as f.pessoa.nome_razao_social for f in $ctrl.listafuncionarios" required>
									   	<option value="">Selecione um analista...</option>
									</select>
								    <span class="red" ng-show="tarefaform.responsavel.$invalid">Responsável é obrigatório.</span>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="panel panel-info form-group-sm">
									<div class="panel-heading heading-text-align"><strong>Análise</strong></div>
									<div class="panel-body">
										<div class="row">
											<div class="col-sm-4">
												<div class="form-group">
													<label for="identificacao">Inicio</label> 
												    <input type="text" id="analise_inicio" name="analise_inicio" ng-model="tarefa.analise_inicio" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="analise_fim">Fim</label> 
												    <input type="text" id="analise_fim" name="analise_fim" ng-model="tarefa.analise_fim" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="analise_fim_real">Fim Real</label> 
												    <input type="text" id="analise_fim_real" name="analise_fim_real" ng-model="tarefa.analise_fim_real" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="panel panel-info form-group-sm">
									<div class="panel-heading heading-text-align"><strong>Desenvolvimento</strong></div>
									<div class="panel-body">
										<div class="row">
											<div class="col-sm-4">
												<div class="form-group">
													<label for="identificacao">Inicio</label> 
												    <input type="text" id="analise_inicio" name="analise_inicio" ng-model="tarefa.densenvolvimento_inicio" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="analise_fim">Fim</label> 
												    <input type="text" id="analise_fim" name="analise_fim" ng-model="tarefa.desenvolvimento_fim" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="analise_fim_real">Fim Real</label> 
												    <input type="text" id="analise_fim_real" name="analise_fim_real" ng-model="tarefa.desenvolvimento_fim_real" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="panel panel-info form-group-sm">
									<div class="panel-heading heading-text-align"><strong>Homologação</strong></div>
									<div class="panel-body">
										<div class="row">
											<div class="col-sm-3">
												<div class="form-group">
													<label for="homologacao_possui_sit">Possui SIT</label> 
												    <select id="homologacao_possui_sit" ng-model="tarefa.homologacao_possui_sit" class="form-control">
												    	<option value="">Selecione...</option>
												    	<option value="S">Sim</option>
												    	<option value="N">Não</option>
												    </select>											
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label for="homologacao_inicio">Inicio</label> 
												    <input type="text" id="homologacao_inicio" name="homologacao_inicio" ng-model="tarefa.homologacao_inicio" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label for="homologacao_fim">Fim</label> 
												    <input type="text" id="homologacao_fim" name="homologacao_fim" ng-model="tarefa.homologacao_fim" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label for="homologacao_fim_real">Fim Real</label> 
												    <input type="text" id="homologacao_fim_real" name="homologacao_fim_real" ng-model="tarefa.homologacao_fim_real" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="panel panel-info form-group-sm">
									<div class="panel-heading heading-text-align"><strong>Entrega da Demanda</strong></div>
									<div class="panel-body">
										<div class="row">
											<div class="col-sm-3">
												<div class="form-group">
													<label for="identificacao">Forecast</label> 
												    <input type="text" id="analise_inicio" name="analise_inicio" ng-model="tarefa.forecast" class="form-control" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label for="identificacao">Aceite</label> 
													<select class="form-control" ng-model="tarefa.aceite">
												    	<option value="">Selecione...</option>
												    	<option value="S">Sim</option>
												    	<option value="N">Não</option>
												    </select>																		
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label for="identificacao">Evidências</label> 
												    <input type="text" id="analise_inicio" name="analise_inicio" ng-model="tarefa.evidencias" class="form-control" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="identificacao">Implantação em produção</label> 
												    <input type="text" id="analise_inicio" name="analise_inicio" ng-model="tarefa.implantacao_producao" class="form-control" ui-mask="99/99/9999" model-view-value="true" maxlength="12"/>											
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label for="identificacao">Implantação in logo?</label> 
												    											
													<select class="form-control" ng-model="tarefa.implantacao_in_loco">
												    	<option value="">Selecione...</option>
												    	<option value="S">Sim</option>
												    	<option value="N">Não</option>
												    </select>																		
												
												</div>											
											</div>
											
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	
		<div id="observacoes" ng-if="$ctrl.verificardisponibilidadeaba('#observacoes')" class="tab-pane">
			<button type="button" class="btn btn-primary margin" ng-click="$ctrl.adicionarobservacao()">
		  		<span class="glyphicon glyphicon-plus"></span> Adicionar observação
			</button>
			
			<table class="table table-sm table-bordered table-striped table-highlight">
				<thead>
				  <tr class="active">
				    <th class="col-sm-2">Data da observação</th>
				    <th class="col-sm-12">Observação</th>
				    <th></th>
				  </tr>
				</thead>
				<tbody>
					<tr ng-repeat="observacao in $ctrl.demanda.observacoes" ng-show="!observacao.remover">
						<td class="col-sm-2">
							<input type="text" ng-model="observacao.data_observacao" class="form-control" ui-mask="99/99/9999" model-view-value="true"/>
						</td>
						<td class="col-sm-12">
							<textarea ng-model="observacao.observacao" class="form-control" placeholder="Observação"></textarea>
						</td>
						<td>
							<button type="button" class="btn btn-default" ng-click="$ctrl.remover(observacao)">
								<span class="glyphicon glyphicon-trash"></span>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div id="ocorrencias" ng-if="$ctrl.verificardisponibilidadeaba('#ocorrencias')" class="tab-pane">
		
			<button type="button" class="btn btn-primary margin" ng-click="$ctrl.adicionarocorrencia()">
		  		<span class="glyphicon glyphicon-plus"></span> Adicionar ocorrência
			</button>
			
			<form name="ocorrenciasform" ng-repeat="ocorrencia in $ctrl.demanda.ocorrencias" ng-show="!ocorrencia.remover">
				<div class="panel panel-primary form-group-sm">
					<div class="panel-heading">
						<div class="btn-group" ng-show="!ocorrencia.show">					
							<button type="button" class="btn btn-primary dropdown-toggle" ng-click="$ctrl.layout(ocorrencia)" >
			  					<span class="glyphicon glyphicon-plus margin"></span>
							</button>
						</div>
						<div class="btn-group" ng-show="ocorrencia.show">
							<button type="button" class="btn btn-primary dropdown-toggle" ng-click="$ctrl.layout(ocorrencia)" >
			  					<span class="glyphicon glyphicon-minus margin"></span>
							</button>
						</div>
						<strong>{{ocorrencia.descricao ? ocorrencia.descricao : '(Sem descrição)'}}</strong>
						<div class="btn-group pull-right">					
							<button type="button" class="btn btn-primary" ng-click="$ctrl.remover(ocorrencia)">
			  					<span class="glyphicon glyphicon-trash margin"></span>
							</button>
						</div>
					</div>
					<div class="panel-body" ng-show="ocorrencia.show">
						<div class="row">
							<div class="col-sm-3">
								<div class="form-group">
									<label for="tipo_ocorrencia">Tipo de ocorrência</label> 
								    <select class="form-control" id="tipo_ocorrencia" name="tipo_ocorrencia" ng-model="ocorrencia.tipo_ocorrencia" required>
								    	<option value="">Selecione...</option>
								    	<option value="E">Erro</option>
								    	<option value="S">Erro de Especificação</option>
								    	<option value="F">Fora do escopo inicial do projeto</option>
									</select>
									<span class="red" ng-show="ocorrenciasform.tipo_ocorrencia.$invalid">Tipo de ocorrência é obrigatório.</span>											
								</div>
							</div>
							<div class="col-sm-7">
								<div class="form-group">
									<label for="descricao">Descricao</label> 
								    <input type="text" class="form-control" id="descricao" name="descricao" ng-model="ocorrencia.descricao" maxlength="100"/>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<div class="form-group">
									<label for="nome_solicitante">Nome do solicitante</label> 
								    <input type="text" class="form-control" id="nome_solicitante" name="nome_solicitante" ng-model="ocorrencia.nome_solicitante" maxlength="30"/>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-group">
									<label for="data_solicitacao">Data de solicitação</label> 
								    <input type="text" class="form-control" id="data_solicitacao" name="data_solicitacao" ng-model="ocorrencia.data_solicitacao" ui-mask="99/99/9999" model-view-value="true"/>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-group">
									<label for="data_prevista_conclusao">Data prevista conclusão</label> 
								    <input type="text" class="form-control" id="data_prevista_conclusao" name="data_prevista_conclusao" ng-model="ocorrencia.data_prevista_conclusao" ui-mask="99/99/9999" model-view-value="true"/>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-group">
									<label for="etapa">Etapa</label> 
								    <select class="form-control" id="etapa" name="etapa" ng-model="ocorrencia.etapa">
								    	<option value="">Selecione...</option>
								    	<option value="C">Concluído</option>
								    	<option value="A">Aguardando análise</option>
								    	<option value="E">Em avaliação</option>
									</select>											
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-group">
									<label for="responsavel">Responsável B2Card</label> 
								    <select id=responsavel name="responsavel" class="form-control" ng-model="ocorrencia.responsavel.id" ng-options="f.id as f.pessoa.nome_razao_social for f in $ctrl.listafuncionarios" required>
									   	<option value="">Selecione um responsável...</option>
									</select>
								</div>
							</div>
							</div>
							<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="descricao_motivo">Descrição do motivo que causaram a ocorrência</label> 
								    <textarea class="form-control" id="descricao_motivo" name="descricao_motivo" ng-model="ocorrencia.descricao_motivo"></textarea>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label for="observacao">Observação</label> 
								    <textarea class="form-control" id="observacao" name="observacao" ng-model="ocorrencia.observacao"></textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
	
	<button type="button" class="btn btn-primary margin" ng-click="$ctrl.salvardemanda()" ng-disabled="demanda.$invalid || itensfaturamento.$invalid || $ctrl.bloquearsalvar">Salvar</button>
	<button type="submit" class="btn btn-danger margin" name="deletar" ng-click="$ctrl.deletar()" ng-show="$ctrl.demanda.id" ng-disabled="$ctrl.bloquearsalvar">Deletar</button>
	
</div>

{%endverbatim%}

{%endblock%}